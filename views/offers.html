<link rel="stylesheet" media="screen" href="handsontable.full.css">
<style>
    .md-block{
        padding: 10px;
        border: 1px solid #ccc; 
    }
    a{
        color:#20C39A;
    }
    a:hover{
        color: #20C39A;
        text-decoration: none;
    }
    a:link:hover{
        color: #20C39A;
        text-decoration: none;
    }
    a:visited{
        color: #20C39A;
        text-decoration: none;
    }
    a:visited:hover{
        color: #20C39A;
        text-decoration: none;
    }
    #heroHeader{
        margin-top: 0px;
        background-color: rgba(32,195,154,0.8);
        color: white;
        min-height: 25vh;
        padding-top: 10px;
    }
    #pageLogoHolder{
        border: 1px solid rgba(0,0,0,0.8);
        height: 90px;
        width: 90px;
        border-radius: 4px;
    }
    #upload2{
        background: white;
        color: black;
        border: 1px solid #000;
        padding: 5px;
    }
    #upload2:hover {
        background: #FF5A5F;
        color: white;
        border: 1px solid #FF5A5F;
    }
    .textInput{
        color: #6E75A8;
    }
    .md-datepicker-input[placeholder] {
      color:#6E75A8;
    }
    .socialShare{
        background-color: #AFCBFF;
    }
    #closeButton{
        color: #ccc;
        font-size: 15px;
        outline-style: none;
    }
    #closeButton:hover{
        color: #20C39A;
    }
</style>


<div id="spacer1" class="hidden-xs whiteBackground">
</div>
<div id="spacerXS" class="hidden-sm hidden-md hidden-lg whiteBackground">
</div>
<!-- Claim the page section -->
<div layout="row" layout-align="center start" class="whiteBackground paddingT20" ng-if="user">
    <div layout="column" flex="90"  ng-cloak>
        <div layout="row" layout-align="start start" class="gainsboroBorder padding20">
            <div layout="column" layout-align="center center" class="padding5 whiteBackground" id="pageLogoHolder" ng-if="provider.logo">
                <img  ng-src="{{provider.logo}}" class="pageLogo"/>
            </div>
            <div flex layout="column" layout-align="center start" class="text secondFont font20 paddingL20">
                <div class="textBlack">
                    {{provider.name }}
                </div>
                <div ng-if="provider.website.length > 0" class="font12">
                    <a ng-href="{{provider.website[0]}}" target="_blank">{{provider.website[0]}}</a>
                </div>
                <div>
                    <md-button class="md-raised md-primary" ng-click="addOffer()" ng-disabled="offerForm.$invalid">Add New Offer</md-button>
                </div>
            </div>
        </div>
        <div layout="column" layout-align="start start" class="gainsboroBorder paddingLR20 paddingTB10">
            <div layout="row" layout-align="start start" class="secondFont font20 textBlack">
            Your Offers
            </div>
            <div layout-wrap layout="row" layout-align="start center" class="editFont width100" ng-if="provideroffers.length>0">
                <div flex="33" ng-repeat="provideroffer in provideroffers" layout="column" layout="start start" class="width100 marginTB10 padding10 textBlack">
                    <div layout="column" layout="start start" class="gainsboroBorder width100" ng-click="setExistingOffer(provideroffer)">
                        <div layout="row" layout-align="center center" class="width100 padding5 gainsboroBottomBorder primaryBackground textWhite">
                            Offer Name: {{provideroffer.name}}
                        </div>
                        <div layout="row" layout-align="center center" class="width100">
                            <div layout="row" layout-align="center center" class="width100">
                                Coupons: {{provideroffer.coupons.length}}
                            </div>
                        </div>
                    
                    </div>
                    
                </div>
            </div>
            <div layout="row" layout-align="start center" class="editFont" ng-if="provideroffers.length==0">
                <div>
                    You have no outstanding offers 
                </div>
                
            </div>
        </div>
        <div layout="column" layout-align="start start" class="gainsboroBorder padding20 paddingB40 marginB20" ng-if="offer">
            <form name="offerForm" class="width100">
            <div layout="column" layout-align="start center" class="width100 paddingB40">
                <div flex layout="row" layout-align="center center" class="width100 secondFont bold textBlack marginB20 font20 paddingB10 gainsboroBottomBorder">
                    New Offer by {{provider.name}}
                </div>
                <div flex layout="row" layout-align="start center" class="width100">
                    <div flex="25" class="secondFont">
                    Offer Name
                    </div>
                    <div layout="column" layout-align="start start" flex class="">
                        <input type="text" placeholder="Offer Name" class="form-control width100 editFont textInput" ng-model="offer.name" required >
                    </div>
                </div>
                <div layout="column" layout-align="center end " class="font8 width100">
                <div class="danger bold font10" ng-if="offer.offerNameError != ''">
                    {{offer.offerNameError}}
                </div>
                <div>
                    Offer Name is not revealed to student but needs to be unique, and is only used for communication with Exambazaar Team
                </div>
                
                </div>
            </div>
            <div layout="row" layout-align="start center" class="width100 paddingB40">
                <div layout="column" layout-align="start start" class="width100">
                    <div flex layout="row" layout-align="start center" class="width100">
                        <div flex="25" class="secondFont">
                        Primary Contact
                        </div>
                        <div flex="25" class="paddingR10">
                            <input type="text" placeholder="Primary Contact Name" class="form-control width100 editFont textInput" ng-model="offer.primaryContact.name" required >
                        </div>
                        <div flex="25" class="paddingR10">
                            <input type="text" placeholder="Primary Contact Email" class="form-control width100 editFont textInput" ng-model="offer.primaryContact.email" required >
                        </div>
                        <div flex="25" class="paddingR10">
                            <input type="text" placeholder="Primary Contact Mobile" class="form-control width100 editFont textInput" ng-model="offer.primaryContact.mobile" required >
                        </div>
                    </div>
                    <div layout="row" layout-align="end center" class="font8 width100">
                        Details of Primary point of contact at {{provider.name}} for all matters related to this offer
                    </div>
                </div>
                
            </div>
            
            <div layout="column" layout-align="start center" class="width100 paddingB40">
                <div layout="row" class="width100">
                    <div flex="25" class="secondFont">
                        Contact Emails
                    </div>
                    <div flex="5">
                        <i class="md-title fa fa-envelope" aria-hidden="true"></i>
                    </div>
                    <div flex="95">
                        <span ng-repeat="email in offer.otheremails track by $index">
                            <input type="text" class=" width25 textInput" ng-model="offer.otheremails[$index]"  placeholder="Add Email">&nbsp;
                        </span>
                        <span>
                            <span ng-click="addEmail()">
                            <i class="md-title fa fa-plus-circle" aria-hidden="true"></i>
                            </span>
                            <span ng-click="showDeleteEmailConfirm($event)">
                            <i class="md-title fa fa-minus-circle" aria-hidden="true" ></i>
                        </span>
                        </span>
                    </div>
                </div>
                <div layout="row" layout-align="end center" class="font8 width100">
                    Add emails of all individuals at {{provider.name}} to receive updates about progress of this offer
                </div>
            </div>
            <div layout="column" layout-align="start center" class="width100 paddingB40">
                <div layout="row" class="width100">
                    <div flex="25" class="secondFont">
                        Contact Mobiles
                    </div>
                    <div flex="5">
                        <i class="md-title fa fa-envelope" aria-hidden="true"></i>
                    </div>
                    <div flex="95">
                        <span ng-repeat="mobile in offer.othermobiles track by $index">
                            <input only-digits ng-minlength="10" ng-maxlength="10" limit-to="10" required type="text" class=" width25 textInput" ng-model="offer.othermobiles[$index]"  placeholder="Add Mobile">&nbsp;
                        </span>
                        <span>
                            <span ng-click="addMobile()">
                            <i class="md-title fa fa-plus-circle" aria-hidden="true"></i>
                            </span>
                            <span ng-click="showDeleteMobileConfirm($event)">
                            <i class="md-title fa fa-minus-circle" aria-hidden="true" ></i>
                        </span>
                        </span>
                    </div>
                </div>
                <div layout="row" layout-align="end center" class="font8 width100">
                    Add emails of all individuals at {{provider.name}} to receive updates about progress of this offer
                </div>
            </div>
            <div layout="column" layout-align="start center" class="width100 paddingB40">
                <div layout="row" layout-align="start center" class="width100">
                    <div flex="25" layout="row" layout-align="start center" class="secondFont">
                        Campaign Validity
                    </div>
                    <div layout="row" layout-align="start center" class="width100">
                    <div flex="20" layout="row" layout-align="start center" class="secondFont">
                        Start Date
                    </div>
                    <div flex="30" class="textInput">
                        <md-datepicker ng-model="offer._start" md-placeholder="Start Date" class="textInput"></md-datepicker>
                    </div>
                    <div flex="20" layout="row" layout-align="start center" class="secondFont">
                        End Date
                    </div>
                    <div flex="25" class="textInput">
                        <md-datepicker ng-model="offer._end" md-placeholder="End Date" class="textInput"></md-datepicker>
                    </div>
                    </div>
                </div>
                <div layout="row" layout-align="end center" class="font8 width100">
                    Add the start date and end date of this offer. Coupons will be issued by Exambazaar only during this date range
                </div>
            </div>
            <div layout="column" layout-align="start start" class="width100 paddingTB20">
            <div flex layout="row" layout-align="start start" class="width100">
                <div flex class="secondFont">
                Tell us about the coupons you want to issue in <span class="bold">{{offer.name}}</span>
                </div>
            </div>
            <div layout="row" layout-align="center center" id="upload2" ng-click="addCoupon()" class="marginTB20 secondFont textLightGrey width25">
            <span class="">
                <i class="fa fa-pencil" aria-hidden="true"></i>&nbsp;&nbsp;Add New Coupon Builder
            </span>
            </div>
            <div flex layout="column" layout-align="start start" class="padding20  width100" ng-repeat="coupon in offer.couponBuilder track by $index">
            
            <div class="width100 padding20 gainsboroBorder">
            <div layout="row" layout-align="end center" class="width100">
                <md-button  class="md-danger md-small tolowercase font12" ng-click="removeCouponBuilder($index)">Remove Coupon Builder</md-button>
            </div>
            <div layout="column" layout-align="start start" class="width100 paddingB10">
                <div flex layout="row" layout-align="start center" class="width100">
                    <div flex="25" class="secondFont">
                    Coupon Name
                    </div>
                    <div layout="column" layout-align="start start" flex class="">
                        <input type="text" placeholder="Coupon Name" class="form-control width100 editFont textInput" ng-model="offer.couponBuilder[$index].name" required >
                    </div>
                </div>
                <div layout="column" layout-align="center end" class="font8 width100">
                <div layout="row" layout-align="end center" class="danger bold font10 width100">
                    {{coupon.couponNameError}}
                </div>
                <div layout="row" layout-align="end center" class="width100">
                    Coupon Name is revealed to student and needs to be unique. Keep it attractive and simple!
                </div>
                
                </div>
            </div>
            <div layout="column" layout-align="start start" class="width100 paddingB10">
                <div flex layout="row" layout-align="start center" class="width100">
                    <div flex="25" class="secondFont">
                    Applicable Courses
                    </div>
                    <div layout="column" layout-align="start start" flex class="">
                        <input type="text" placeholder="Coupon Name" class="form-control width100 editFont textInput" ng-model="offer.couponBuilder[$index].validfor" required >
                    </div>
                </div>
                <div layout="row" layout-align="end center" class="font8 width100">
                Enter all courses on which this coupon will be honored by {{provider.name}}. Kept as "All Courses" by default. This information is shown to students.
                </div>
            </div>
            <div layout="column" layout-align="start start" class="width100 paddingB10">
                <div flex layout="row" layout-align="start center" class="width100">
                    <div flex="25" class="secondFont">
                    Discount Details
                    </div>
                    <div layout-wrap flex="75" layout="row" layout-align="start center" flex class="width100">
                        <div flex="25" class="secondFont">
                        Discount Type
                        </div>
                        <div flex="25" class="secondFont textInput">
                        <md-input-container class="textInput">
                          <md-select ng-model="offer.couponBuilder[$index].discountType"  placeholder="Select Discount Type" class="textInput">

                            <md-option ng-value="discountType" ng-repeat="discountType in discountTypes" ng-click="updateDiscountType(coupon, discountType)" class="textInput">
                              {{discountType}}
                            </md-option>
                          </md-select>
                        </md-input-container>
                        </div>
                        <div flex="25" class="secondFont" ng-if="offer.couponBuilder[$index].discountType !=''">
                            <span ng-if="offer.couponBuilder[$index].discountType == 'Percentage Discount'">
                                Percentage Off
                            </span>
                            <span ng-if="offer.couponBuilder[$index].discountType == 'Flat Discount'">
                                Flat Off (in &#8377;)
                            </span>
                        </div>
                        <div flex="25" class="secondFont" ng-if="offer.couponBuilder[$index].discountType !=''">
                            <input only-digits type="text" placeholder="Percentage Off in % (eg: 50)" class="form-control width100 editFont textInput" ng-model="offer.couponBuilder[$index].percentageDiscount" required ng-if="offer.couponBuilder[$index].discountType == 'Percentage Discount'">
                            <input only-digits  type="text" placeholder="Flat Discount in &#8377; (eg: 1000)" class="form-control width100 editFont textInput" ng-model="offer.couponBuilder[$index].flatDiscount" required ng-if="offer.couponBuilder[$index].discountType == 'Flat Discount'">
                        </div>
                        <div flex="50" layout="row" layout-align="start center" class="secondFont" ng-if="offer.couponBuilder[$index].discountType !=''">
                            <div flex="50" class="secondFont">
                            Social Share Benefit&nbsp;
                            <span ng-if="offer.couponBuilder[$index].discountType == 'Percentage Discount'">
                            %
                            </span>
                            <span ng-if="offer.couponBuilder[$index].discountType == 'Flat Discount'">
                            &#8377;
                            </span>
                            </div>
                            <div flex="50" class="secondFont">
                            <input only-digits type="text" placeholder="Social Share Benefit in % (eg: 15)" class="form-control width100 editFont textInput" ng-model="offer.couponBuilder[$index].percentageSocialShareBenefit" required ng-if="offer.couponBuilder[$index].discountType == 'Percentage Discount'">
                            <input only-digits  type="text" placeholder="Social Share Benefit in &#8377; (eg: 250)" class="form-control width100 editFont textInput" ng-model="offer.couponBuilder[$index].flatSocialShareBenefit" required ng-if="offer.couponBuilder[$index].discountType == 'Flat Discount'">
                            </div>
                        </div>
                    </div>
                </div>
                <div layout="row" layout-align="end center" class="font8 width100">
                Enter the details of percentage or flat discount you are offering in this coupon
                </div>
            </div>
            
                
                
            <div layout="column" layout-align="start start" class="width100 paddingB10">
                <div flex layout="row" layout-align="start center" class="width100">
                    <div flex="25" class="secondFont">
                    Validty Details
                    </div>
                    <div flex="75" layout="row" layout-align="start center" flex class="width100">
                        <div flex="15" class="secondFont">
                        Expiry Type
                        </div>
                        <div flex="35" class="secondFont textInput">
                        <md-input-container class="textInput">
                          <md-select ng-model="offer.couponBuilder[$index].validityType"  placeholder="Select Validity Type" class="textInput">

                            <md-option ng-value="validityType" ng-repeat="validityType in validityTypes" ng-click="updateValidityType(coupon, validityType)" class="textInput">
                              {{validityType}}
                            </md-option>
                          </md-select>
                        </md-input-container>
                        </div>
                        <div flex="20" class="secondFont" ng-if="offer.couponBuilder[$index].validityType !=''">
                            <span ng-if="offer.couponBuilder[$index].validityType == 'From date of issue by Exambazaar'">
                                Duration (in days)
                            </span>
                            <span ng-if="offer.couponBuilder[$index].validityType == 'Fixed Expiry Date'">
                                Select end date
                            </span>
                        </div>
                        <div flex="30" class="secondFont" ng-if="offer.couponBuilder[$index].validityType !=''">
                            <input only-digits type="text" placeholder="Duration in days (eg: 90)" class="form-control width100 editFont textInput" ng-model="offer.couponBuilder[$index].validtyDuration" required ng-if="offer.couponBuilder[$index].validityType == 'From date of issue by Exambazaar'">
                            <md-datepicker ng-model="offer.couponBuilder[$index].fixedExpiryDate" md-placeholder="Start Date" required ng-if="offer.couponBuilder[$index].validityType == 'Fixed Expiry Date'"></md-datepicker>
                        </div>
                    </div>
                </div>
                <div layout="row" layout-align="end center" class="font8 width100">
                Enter the details of validty type and expiry date method to be used by Exambazaar
                </div>
            </div>
            <div layout="column" layout-align="start start" class="width100 paddingTB10">
                <div flex layout="row" layout-align="start center" class="width100">
                    <div flex="25" class="secondFont">
                    Coupon Steps
                    </div>
                    <div flex="75" layout="column" layout-align="start start" class="width100">
                        <div layout="row" layout-align="start center" ng-repeat="step in offer.couponBuilder[$index].steps" class="width100">
                            <div layout="row" layout-align="center center" flex="10">
                                {{$index+1}}.
                            </div>
                            <div layout="row" layout-align="start center" flex>
                                <input type="text" placeholder="Enter step information" class="form-control width100 editFont textInput" ng-model="coupon.steps[$index]">
                            </div>
                            
                        
                        </div>
                        
                    </div>
                </div>
                <div layout="row" layout-align="end center" class="font8 width100">
                Enter detailed steps for students to avail discount
                </div>
            </div>    
                
            <div layout="column" layout-align="start start" class="width100 paddingB10">
                <div flex layout="row" layout-align="start center" class="width100">
                    <div flex="25" class="secondFont">
                    Coupon Codes&nbsp;
                        <span class="badge">
                            {{offer.couponBuilder[$index].couponCodes.length}}
                        </span>
                    </div>
                    <div flex="75" layout="row" layout-align="start center" flex class="width100">
                        <div flex="25" class="secondFont">
                        Coupon Generation
                        </div>
                        <div flex="35" class="secondFont textInput">
                        <md-input-container class="textInput">
                          <md-select ng-model="offer.couponBuilder[$index].generationType"  placeholder="Select Coupon Generation" class="textInput">

                            <md-option ng-value="generationType" ng-repeat="generationType in generationTypes" ng-click="updateGenerationType(coupon, generationType)" class="textInput">
                              {{generationType}}
                            </md-option>
                          </md-select>
                        </md-input-container>
                        </div>
                        <div flex="5" class="secondFont">
                        </div>
                        
                        <div flex="35" layout="row" layout-align="start center" class="secondFont" ng-if="offer.couponBuilder[$index].generationType !=''">
                            <div layout="row" layout-align="start center" ng-if="offer.couponBuilder[$index].generationType == 'Generated by Exambazaar'">
                                <div flex="25" layout="row" layout-align="start center">
                                <input only-digits  type="text" placeholder="Number of coupons" class="form-control width100 editFont textInput marginR10" ng-model="offer.couponBuilder[$index].nCoupons" required ng-if="offer.couponBuilder[$index].generationType == 'Generated by Exambazaar'">
                                </div>
                                <md-button  class="md-green2 md-small tolowercase font12" ng-click="generateCoupons(offer.couponBuilder[$index])" ng-disabled="readyToAddCoupons(offer.couponBuilder[$index])" ng-if="offer.couponBuilder[$index].couponCodes.length == 0">Generate Codes</md-button>
                            </div>
                            <span ng-if="offer.couponBuilder[$index].generationType != 'Generated by Exambazaar'">
                                <md-button  class="md-green2 md-small tolowercase font12" ng-click="showUploadCouponsDialog(offer.couponBuilder[$index])" ng-if="offer.couponBuilder[$index].couponCodes.length == 0">Upload Codes</md-button>
                                
                                
                            </span>
                        </div>
                        
                    </div>
                </div>
                <div layout="row" layout-align="end center" class="font8 width100">
                Enter the details of validty type and expiry date method to be used by Exambazaar
                </div>
            </div>
            <div layout="column" layout-align="start start" class="width100 paddingB10" ng-if="offer.couponBuilder[$index].couponCodes.length > 0">
                <div layout-wrap layout="row" layout-align="center center" class="width100 marginB10">
                    Coupon Codes
                </div>
                <div layout-wrap layout="row" layout-align="center center" class="width100">
                    <div layout="column" layout-align="center center" flex="5" ng-repeat="coupon in offer.couponBuilder[$index].couponCodes" class="font8 marginLR5 marginB10 gainsboroBorder">
                        
                        <span>{{coupon.code}}</span>
                        <span class="socialShare">{{coupon.socialShareCode}}</span>
                    
                    </div>
                </div>
                <div layout="row" layout-align="center center" class="font10 width100">
                <div class="marginR10 danger">
                    <span ng-click="removeCodes($index)">
                        Remove Coupon Codes
                    </span> 
                </div>
                <div>
                Coupon codes pairs linked to your offer. There are two sets of coupon code generated&nbsp;
                <span ng-if="offer.couponBuilder[$index].discountType == 'Percentage Discount'">
                    (normal for {{offer.couponBuilder[$index].percentageDiscount - offer.couponBuilder[$index].percentageSocialShareBenefit}}% off, <span class="socialShare">social share</span> for {{offer.couponBuilder[$index].percentageDiscount}}% off)
                </span>    
                <span ng-if="offer.couponBuilder[$index].discountType == 'Flat Discount'">
                    (normal for {{offer.couponBuilder[$index].flatDiscount - offer.couponBuilder[$index].flatSocialShareBenefit}}&#8377; off, <span class="socialShare">social share</span> for {{offer.couponBuilder[$index].flatDiscount}}&#8377; off)
                </span>  
                </div>
                  
                </div>
            </div>
            </div>
            
            </div>
                
            </div>
            
            <div layout="row" layout-align="center center" class="width100">
                <md-button  class="md-green2 md-small tolowercase font16 width50" ng-click="saveOffer(offer)" ng-disabled="offerForm.$invalid">I am done! Add Offer</md-button>
            </div>
            <div layout="row" layout-align="center center" class="width100 font10 danger" ng-if="saveOfferError">
                <div ng-repeat="error in saveOfferError">
                {{$index+1}}. {{error}}
                </div>
            </div>
            </form>
        </div>
        
        <div layout="column" layout-align="start start" class="gainsboroBorder padding20 paddingB40 marginB20" ng-if="existingOffer">
            <div layout="row" layout-align="start center" class="width100 secondFont textBlack bold">
                Offer Name: {{existingOffer.name}}
            </div>
            <div layout="row" layout-align="center center" class="width100 editFont textBlack">
                <div flex layout="column">
                    <div>
                    
                    </div>
                </div>
            </div>
            <div layout="column" layout-align="start start" ng-repeat="couponName in existingOffer.couponNames" class="font10 width100 marginTB10">
            <div layout="row" layout-align="start center" class="width100 editFont textBlack marginTB5">
                Coupon Name: {{couponName}}
            </div>
            <div layout="row" layout-align="start start" class="width100 bold">
                <div flex="10">Valid For</div>
                <div flex="10">Code</div>
                <div flex="10">Social Share Code</div>
                <div flex="10">Discount Type</div>
                <div flex="10">Discount Value</div>
                <div flex="10">Validity Rule</div>
                <div flex="10">
                    Expiry Date/Rule
                </div>
                <div flex="10">
                    Status
                </div>
                <div flex="20">
                    Student & Offer
                </div>
            </div>    
            <div layout="column" layout-align="start start" ng-repeat="coupon in existingOffer.coupons" class="font10 width100" ng-if="coupon.name == couponName">
                <div layout="row" layout-align="start start" class="width100">
                    <!--<div flex class="font8">{{coupon.name}}</div>-->
                    <div flex="10">{{coupon.validfor}}</div>
                    <div flex="10">{{coupon.code}}</div>
                    <div flex="10">{{coupon.socialShareCode}}</div>
                    <div flex="10">{{coupon.discountType}}</div>
                    <div flex="10" ng-if="coupon.discountType=='Percentage Discount'">{{coupon.percentageDiscount - coupon.percentageSocialShareBenefit}}% +  {{coupon.percentageSocialShareBenefit}}%</div>
                    <div flex="10" ng-if="coupon.discountType=='Flat Discount'">{{coupon.flatDiscount - coupon.flatSocialShareBenefit}}&#8377; + {{coupon.flatSocialShareBenefit}}&#8377; </div>
                    <div flex="10">{{coupon.validityType}}</div>
                    <div flex="10" ng-if="coupon.validityType=='Fixed Expiry Date'">
                        {{coupon.fixedExpiryDate | date:'MMM d, y'}}
                    </div>
                    <div flex="10" ng-if="coupon.validityType=='From date of issue by Exambazaar'">{{coupon.validtyDuration}}
                    </div>
                    <div flex="10">
                        <span ng-if="coupon.user">
                        Issued
                        </span>
                        <span ng-if="!coupon.user">
                        Not Issued
                        </span>
                    </div>
                    <div flex="20">
                        <div ng-if="coupon.user">
                        {{coupon.user.basic.name}}
                        ({{coupon.delivered.usercode}})
                        <span ng-if="coupon.user">
                        <span ng-if="coupon.discountType == 'Percentage Discount'">
                            <span ng-if="coupon.delivered.social">
                                {{coupon.percentageDiscount}}% off
                            </span>
                            <span ng-if="!coupon.delivered.social">
                                {{coupon.percentageDiscount - coupon.percentageSocialShareBenefit}}% off
                            </span>

                        </span>
                        <span ng-if="coupon.discountType == 'Flat Discount'">
                            <span ng-if="coupon.delivered.social">
                                {{coupon.flatDiscount}}&#8377; off
                            </span>
                            <span ng-if="!coupon.delivered.social">
                                {{coupon.flatDiscount - coupon.flatSocialShareBenefit}}&#8377; off
                            </span>
                        </span>
                        </span>
                        
                        
                    </div>
                    </div>
                </div>
                
            </div>
            </div>
            
        </div>
    </div>
</div>


<div style="visibility: hidden">    
    <div class="md-dialog-container" id="uploadCouponsDialog">
      <md-dialog class="fullscreen-dialog2 dialogText">
        <div layout="row" layout-xs="column" layout-fill layout-margin>
            <div hide-gt-xs flex-xs="5">
            <span class="pull-right" id="closeButton" ng-click="cancelDialog()"><i class="fa fa-times" aria-hidden="true"></i></span>
            </div>
            <div flex="95" layout = "column" class="marginLR60">
                <div layout="row" layout-align="center center" class="secondFont textBlack">
                    Upload Coupons for&nbsp;<span class="bold">
                        {{uploadCouponBuilder.name}}
                    </span>
                </div>
                <div layout="row" layout-align="center center" class="secondFont textBlack">
                    <md-button  class="md-green2 md-small tolowercase font12" ng-click="submitUploadedCoupons(uploadCouponBuilder)">Submit Coupon Codes</md-button>
                </div>
                <div layout="row" layout-align="center center" class="editFont textBlack marginT20 width100">
                    <span ng-if="uploadCouponBuilder.discountType == 'Percentage Discount'">
                        Normal Coupon will offer  {{uploadCouponBuilder.percentageDiscount - uploadCouponBuilder.percentageSocialShareBenefit}}% off and <span class="socialShare">Social Share coupon</span> will offer  {{uploadCouponBuilder.percentageDiscount}}% off
                    </span>    
                    <span ng-if="uploadCouponBuilder.discountType == 'Flat Discount'">
                        Normal Coupon will offer  {{uploadCouponBuilder.flatDiscount - uploadCouponBuilder.flatSocialShareBenefit}}&#8377; off and <span class="socialShare">Social Share coupon</span> will offer  {{uploadCouponBuilder.flatDiscount}}% off
                    </span>  
                </div>
                <div layout="column" layout-align="center center" ng-if="uploadErrorMessages">
                    <div class="font8 danger" ng-repeat="uploadErrorMessage in uploadErrorMessages">
                        {{$index+1}}. {{uploadErrorMessage}}
                    </div>
                </div>
                <div layout="row" layout-align="center center" class="marginT10">
                    <hot-table settings="{colHeaders: colHeaders, contextMenu: ['row_above', 'row_below', 'remove_row','undo','redo'], afterChange: afterChange, wordWrap:'true', renderAllRows: 'true'}" context-menu  datarows="uploadedCoupons" min-rows="10" min-spare-rows="1" height="300" width="600" id="hotTable">
                    <hot-column data="code" title="'Normal Coupon Codes'" width="300"></hot-column>
                    <hot-column data="socialShareCode" title="'Social Share Coupons Codes'"  width="300"></hot-column>
                        <!--width="80"-->
                    </hot-table>
                </div>
                
                
            </div>
            
            <div hide-xs flex-gt-xs="5" class="" layout="row" layout-align="end start">
            <span class="pull-right" ng-click="cancelDialog()" id="closeButton"><i class="fa fa-times" aria-hidden="true"></i></span>
            </div>
        </div>
      </md-dialog>
</div>    
</div>
